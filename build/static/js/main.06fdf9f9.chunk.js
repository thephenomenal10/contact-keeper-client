(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e){e.exports=JSON.parse('{"a":"https://contact-keeper-serverr.herokuapp.com"}')},48:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(22),s=a.n(r),o=(a(48),a(20)),l=a(4),i=a(6),u=a.n(i),j=a(16),d=a(10),p=Object(n.createContext)(),b=a(28),O=a(3),h="ADD_CONTACT",m="DELETE_CONTACT",x="CONTACT_ERROR",f="SET_CURRENT",g="CLEAR_CURRENT",v="UPDATE_CONTACT",y="FILTER_CONTACTS",C="CLEAR_FILTER",N="SET_ALERT",k="REMOVE_ALERT",E="REGISTER_SUCCESS",w="REGISTER_FAIL",A="USER_LOADED",T="AUTH_ERROR",R="LOGIN_SUCCESS",S="LOGIN_FAIL",_="LOG_OUT",F="CLEAR_ERRORS",L="GET_CONTACTS",P="CLEAR_CONTACTS",I=function(e,t){switch(t.type){case L:return Object(O.a)(Object(O.a)({},e),{},{contacts:t.payload,loading:!1});case h:return Object(O.a)(Object(O.a)({},e),{},{contacts:[t.payload].concat(Object(b.a)(e.contacts)),loading:!1});case v:return Object(O.a)(Object(O.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case m:return Object(O.a)(Object(O.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case P:return Object(O.a)(Object(O.a)({},e),{},{contacts:null,filtered:null,error:null,current:null});case f:return Object(O.a)(Object(O.a)({},e),{},{current:t.payload});case g:return Object(O.a)(Object(O.a)({},e),{},{current:null});case y:return Object(O.a)(Object(O.a)({},e),{},{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)}))});case C:return Object(O.a)(Object(O.a)({},e),{},{filtered:null});case x:return Object(O.a)(Object(O.a)({},e),{},{error:t.payload});default:return e}},U=a(11),D=a.n(U),q=a(17),G=a(1),J=function(e){var t=Object(n.useReducer)(I,{contacts:null,current:null,filtered:null,error:null}),a=Object(d.a)(t,2),c=a[0],r=a[1],s=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("".concat(q.a,"/api/contacts"));case 3:t=e.sent,r({type:L,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:x,payload:e.t0.response.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,D.a.post("".concat(q.a,"/api/contacts"),t,a);case 4:n=e.sent,r({type:h,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:x,payload:e.t0.response.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.delete("".concat(q.a,"/api/contacts/").concat(t));case 3:r({type:m,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:x,payload:e.t0.response.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,D.a.put("".concat(q.a,"/api/contacts/").concat(t._id),t,a);case 4:n=e.sent,r({type:v,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:x,payload:e.t0.response.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)(p.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,addContact:o,deleteContact:l,setCurrent:function(e){r({type:f,payload:e})},clearCurrent:function(){r({type:g})},clearContacts:function(){r({type:P})},updateContact:i,filterContacts:function(e){r({type:y,payload:e})},getContacts:s,clearFilter:function(){r({type:C})}},children:e.children})},B=Object(n.createContext)(),H=function(e,t){switch(t.type){case A:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case E:case R:return localStorage.setItem("token",t.payload.token),Object(O.a)(Object(O.a)(Object(O.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case w:case T:case S:case _:return localStorage.removeItem("token"),Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!1,loading:!1,token:null,user:null,error:t.payload});case F:return Object(O.a)(Object(O.a)({},e),{},{error:null})}},M=function(e){e?D.a.defaults.headers.common["x-auth-token"]=e:delete D.a.defaults.headers.common["x-auth-token"]},V=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,error:null,user:null},a=Object(n.useReducer)(H,t),c=Object(d.a)(a,2),r=c[0],s=c[1],o=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&M(localStorage.token),e.prev=1,e.next=4,D.a.get("".concat(q.a,"/api/auth"));case 4:t=e.sent,s({type:A,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:T});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,D.a.post("".concat(q.a,"/api/users"),t,a);case 4:n=e.sent,s({type:E,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:w,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,D.a.post("".concat(q.a,"/api/auth"),t,a);case 4:n=e.sent,s({type:R,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:S,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)(B.Provider,{value:{token:r.token,isAuthenticated:r.isAuthenticated,user:r.user,error:r.error,loading:r.loading,register:l,loadUser:o,login:i,clearErrors:function(){return s({type:F})},logout:function(){return s({type:_})}},children:e.children})},K=Object(n.createContext)(),Y=a(90),z=function(e,t){switch(t.type){case N:return[].concat(Object(b.a)(e),[t.payload]);case k:return e.filter((function(e){return e.id!==t.payload}));default:return e}},Q=function(e){var t=Object(n.useReducer)(z,[]),a=Object(d.a)(t,2),c=a[0],r=a[1];return Object(G.jsx)(K.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Y.a.v4;r({type:N,payload:{msg:e,type:t,id:n}}),setTimeout((function(){return r({type:k,payload:n})}),a)}},children:e.children})},W=a(18),X=function(){var e=Object(n.useContext)(p),t=e.addContact,a=e.current,r=e.clearCurrent,s=e.updateContact;Object(n.useEffect)((function(){u(null!==a?a:{name:"",email:"",phone:"",type:"personal"})}),[e,a]);var o=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),l=Object(d.a)(o,2),i=l[0],u=l[1],j=i.name,b=i.email,h=i.phone,m=i.type,x=function(e){u(Object(O.a)(Object(O.a)({},i),{},Object(W.a)({},e.target.name,e.target.value)))},f=function(){r()};return Object(G.jsx)(c.a.Fragment,{children:Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null===a?t(i):s(i),f()},children:[Object(G.jsxs)("h2",{className:"text-primary",children:[" ",a?"Edit Contact":"Add Contact"]}),Object(G.jsx)("input",{type:"text",placeholder:"name",name:"name",value:j,onChange:x}),Object(G.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:b,onChange:x}),Object(G.jsx)("input",{type:"text",placeholder:"Phone",name:"phone",value:h,onChange:x}),Object(G.jsx)("h5",{children:"Contact Type"}),Object(G.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===m,onChange:x}),"Personal"," ",Object(G.jsx)("input",{type:"radio",name:"type",value:"professional",checked:"professional"===m,onChange:x}),"Professional"," ",Object(G.jsx)("div",{children:Object(G.jsx)("input",{type:"submit",value:a?"Update Contact":"Add Contact",className:"btn btn-primary btn-block"})}),a&&Object(G.jsx)("div",{children:Object(G.jsx)("button",{className:"btn btn-light btn-block",onClick:f,children:"Clear"})})]})})},Z=a(91),$=a(89),ee=a(88),te=a(7),ae=function(e){var t=e.contact,a=Object(n.useContext)(p),c=a.deleteContact,r=a.setCurrent,s=a.clearCurrent,o=t._id,l=t.name,i=t.email,u=t.phone,j=t.type;return Object(G.jsxs)("div",{className:"card bg-light",children:[Object(G.jsxs)("h3",{className:"textiprimary text-left",children:[" ",l," ",Object(G.jsxs)("span",{style:{float:"right"},className:"badge "+("professional"===j?"badge-success":"badge-primary"),children:[" ",j.charAt(0).toUpperCase()+j.slice(1)]})," "]}),Object(G.jsxs)("ul",{className:"list",children:[i&&Object(G.jsxs)("li",{children:[" ",Object(G.jsx)("i",{className:"fas fa-envelope-open"}),i]}),u&&Object(G.jsxs)("li",{children:[" ",Object(G.jsx)("i",{className:"fas fa-phone"}),u]})]}),Object(G.jsxs)("p",{children:[Object(G.jsx)("button",{className:"btn btn-dark vtn-sm",onClick:function(){return r(t)},children:"Edit"}),Object(G.jsx)("button",{className:"btn btn-danger vtn-sm",onClick:function(){c(o),s()},children:"Delete"})]})]})};ae.protoTypes={contact:a.n(te).a.object.isRequired};var ne=ae,ce=function(){var e=Object(n.useContext)(p),t=e.contacts,a=e.filtered,c=e.getContacts,r=e.loading;return Object(n.useEffect)((function(){c()}),[]),null===t||0!==t.length||r?Object(G.jsx)(n.Fragment,{children:null===t||r?Object(G.jsx)("center",{children:Object(G.jsx)(ee.a,{})}):Object(G.jsx)(Z.a,{children:null!==a?a.map((function(e){return Object(G.jsx)($.a,{timeout:5e3,classNames:"item",children:Object(G.jsx)(ne,{contact:e})},e._id)})):t.map((function(e){return Object(G.jsx)($.a,{timeout:5e3,classNames:"item",children:Object(G.jsx)(ne,{contact:e})},e._id)}))})}):Object(G.jsx)("h4",{children:"Please add a contact"})},re=function(){var e=Object(n.useContext)(p),t=Object(n.useRef)(""),a=e.filterContacts,c=e.clearFilter,r=e.filtered;Object(n.useEffect)((function(){null===r&&(t.current.value="")}));return Object(G.jsx)("form",{children:Object(G.jsx)("input",{ref:t,type:"text",placeholder:"Filter Contacts...",onChange:function(e){""!==t.current.value?a(e.target.value):c()}})})},se=function(){var e=Object(n.useContext)(B);return Object(n.useEffect)((function(){e.loadUser()}),[]),Object(G.jsxs)("div",{className:"grid-2",children:[Object(G.jsxs)("div",{children:[" ",Object(G.jsx)(X,{})," "]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(re,{}),Object(G.jsx)(ce,{})]})]})},oe=function(){return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"About this App"}),Object(G.jsxs)("p",{className:"my-1",children:[" ","This is the keeper App where you can keep yout ocontact safe"]}),Object(G.jsxs)("p",{className:"bg-dark p",children:[Object(G.jsx)("strong",{children:"Version:"}),"1.0.0"]})]})},le=function(e){var t=e.title,a=e.icon,c=Object(n.useContext)(B),r=Object(n.useContext)(p),s=c.isAuthenticated,l=c.logout,i=c.user,u=r.clearContacts,j=Object(G.jsxs)(n.Fragment,{children:[Object(G.jsxs)("li",{children:["Hello ",i&&i.name," "]}),Object(G.jsx)("li",{children:Object(G.jsx)("a",{onClick:function(){l(),u()},href:"#!",children:Object(G.jsxs)("i",{className:"fas fa-sign-out-alt",children:[" ",Object(G.jsx)("span",{className:"hide-sm",children:"Logout"})," "]})})})]}),d=Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("li",{children:Object(G.jsx)(o.b,{to:"/register",children:"Register"})}),Object(G.jsx)("li",{children:Object(G.jsx)(o.b,{to:"/login",children:"Login"})})]});return Object(G.jsxs)("div",{className:"navbar bg-primary",children:[Object(G.jsxs)("h1",{children:[" ",Object(G.jsx)("i",{className:a})," ",t," "]}),Object(G.jsx)("ul",{children:s?j:d})]})};le.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var ie=le,ue=function(e){var t=Object(n.useContext)(K),a=Object(n.useContext)(B),r=t.setAlert,s=a.register,o=a.error,l=a.clearErrors,i=a.isAuthenticated,u=Object(n.useState)({name:"",email:"",password:"",password2:""}),j=Object(d.a)(u,2),p=j[0],b=j[1];Object(n.useEffect)((function(){i&&e.history.push("/"),"User already exist"===o&&(r(o,"danger"),l())}),[o,e.history,i]);var h=p.name,m=p.email,x=p.password,f=p.password2,g=function(e){b(Object(O.a)(Object(O.a)({},p),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(G.jsx)(c.a.Fragment,{children:Object(G.jsxs)("div",{className:"form-container",children:[Object(G.jsxs)("h1",{children:["Account ",Object(G.jsx)("span",{className:"text-primary",children:"Register "})]}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===m||""===x?r("Please enter all fields","danger"):x!==f?r("Your password do not match"):s({name:h,email:m,password:x})},children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"name",children:"Name"}),Object(G.jsx)("input",{type:"text",name:"name",value:h,onChange:g,required:!0})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"email",children:"Email Adderess"}),Object(G.jsx)("input",{type:"email",name:"email",value:m,onChange:g,required:!0})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"password",children:"Password"}),Object(G.jsx)("input",{type:"password",name:"password",value:x,onChange:g,required:!0,minLength:"6"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(G.jsx)("input",{type:"password",name:"password2",value:f,onChange:g,required:!0,minLength:"6"})]}),Object(G.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})})},je=function(e){var t=Object(n.useContext)(K),a=Object(n.useContext)(B),r=a.login,s=a.error,o=a.clearErrors,l=a.isAuthenticated,i=t.setAlert;Object(n.useEffect)((function(){l&&e.history.push("/"),"Invalid Credetials"===s&&(i(s,"danger"),o())}),[s,e.history,l]);var u=Object(n.useState)({email:"",password:""}),j=Object(d.a)(u,2),p=j[0],b=j[1],h=p.email,m=p.password,x=function(e){b(Object(O.a)(Object(O.a)({},p),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(G.jsx)(c.a.Fragment,{children:Object(G.jsxs)("div",{className:"form-container",children:[Object(G.jsxs)("h1",{children:["Account ",Object(G.jsx)("span",{className:"text-primary",children:"Login "})]}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===m?i("Please fill in all fields","danger"):r({email:h,password:m})},children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"email",children:"Email Adderess"}),Object(G.jsx)("input",{type:"email",name:"email",value:h,onChange:x,required:!0})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"password",children:"Password"}),Object(G.jsx)("input",{type:"password",name:"password",value:m,onChange:x,required:!0,minLength:"6"})]}),Object(G.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})})},de=function(){var e=Object(n.useContext)(K);return e.alerts.length>0&&e.alerts.map((function(e){return Object(G.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(G.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},pe=a(41),be=function(e){var t=e.component,a=Object(pe.a)(e,["component"]),c=Object(n.useContext)(B),r=c.isAuthenticated,s=c.loading;return Object(G.jsx)(l.b,Object(O.a)(Object(O.a)({},a),{},{render:function(e){return r||s?Object(G.jsx)(t,Object(O.a)({},e)):Object(G.jsx)(l.a,{to:"/login"})}}))};localStorage.token&&M(localStorage.token);var Oe=function(){return Object(G.jsx)(V,{children:Object(G.jsx)(J,{children:Object(G.jsx)(Q,{children:Object(G.jsx)(o.a,{children:Object(G.jsxs)(c.a.Fragment,{children:[Object(G.jsx)(ie,{}),Object(G.jsxs)("div",{className:"container",children:[Object(G.jsx)(de,{}),Object(G.jsxs)(l.d,{children:[Object(G.jsx)(be,{exact:!0,path:"/",component:se}),Object(G.jsx)(l.b,{exact:!0,path:"/about",component:oe}),Object(G.jsx)(l.b,{exact:!0,path:"/register",component:ue}),Object(G.jsx)(l.b,{exact:!0,path:"/login",component:je})]})]})]})})})})})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,92)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(Oe,{})}),document.getElementById("root")),he()}},[[74,1,2]]]);
//# sourceMappingURL=main.06fdf9f9.chunk.js.map